<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
    
    <head>
        <title>
            CubicVR.js: Basic Texured Cube /w Scene
        </title>
        <script src="../../CubicVR.js" type="text/javascript">
        </script>
        <script type='text/javascript'>
            var contexts = [];
            function prepareScene( canvas ) {
                var context = CubicVR.init( canvas );
                contexts.push( context );

                CubicVR.switchContext( context );

                var boxMesh = new CubicVR.Mesh({ 
                    primitive: {
                        type: "box",
                        size: 1.0,
                        material: {
                            textures: {
                                color: "../../samples/images/6583-diffuse.jpg"
                            }
                        },
                        uv: {
                            projectionMode: "cubic",
                            scale: [1, 1, 1]
                        }
                    },
                    compile: true
                });

                var scene = new CubicVR.Scene(canvas.width, canvas.height, 80);

                var boxObject = new CubicVR.SceneObject(boxMesh);
                scene.bind(boxObject);

                scene.camera.position = [1, 1, 1];
                scene.camera.target = [0, 0, 0];

                CubicVR.addResizeable(scene);

                return scene;
            }

            document.addEventListener( 'DOMContentLoaded', function( e ) {
              var scenes = [];
              scenes.push( prepareScene( document.getElementById( 'canvas1' ) ) );
              scenes.push( prepareScene( document.getElementById( 'canvas2' ) ) );
              setInterval( function() {
                for ( var i=0, l=scenes.length; i<l; ++i ) {
                  CubicVR.switchContext( contexts[ i ] );
                  var gl = CubicVR.GLCore.gl;
                  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
                  scenes[ i ].render();
                }
              }, 500 );
            }, false);
        </script>
    </head>
    
    <body>
      <canvas width="300" height="300" id="canvas1"></canvas>
      <canvas width="300" height="300" id="canvas2"></canvas>
    </body>

</html>
